import{W as p,u as T,r as C,C as q,o as B,c as U,b as n,w as r,bi as A,a as c,bk as N,D as P,k as z,n as F,S as _,as as R,N as V,bj as $}from"./index.88006003.js";import{Q as j,_ as Q,a as W}from"./vue-quill.esm-bundler.f3a85451.js";import{_ as I}from"./Select.5d1c5625.js";import{_ as M}from"./DatePicker.3a4cc548.js";import{_ as O}from"./Switch.96651fb9.js";import{_ as G}from"./Upload.98c6060b.js";import"./get-slot.65c4337d.js";const H={id:"ArticleEditor"},J=c("h1",null,"\u6587\u7AE0\u7BA1\u7406",-1),K=z("\u4E0A\u50B3\u6587\u7AE0\u5716\u7247"),L={style:{display:"flex","justify-content":"flex-end"},class:"submitButton"},X={href:"#admin/admin-article-setting"},Y=c("button",{type:"submit"},"\u4FDD\u5B58",-1),ae={__name:"AdminArticleEditorSettingView",setup(Z){const d=p("medium"),m=p(null),f=T(),t=C({_id:"",articleTitle:"",articleDate:Date.now(),articlePic:[],articleDescription:"",articleShow:!1,idx:-1,show:!1,articleEditor:"",articleCategory:""}),u=({focused:i,checked:e})=>{const o={};return e?(o.background="#2473cb",i&&(o.boxShadow="0 0 0 2px #2169BA")):(o.background="#959595",i&&(o.boxShadow="0 0 0 2px #595959")),o},g={articleTitle:{required:!0,trigger:["blur","input"],validator(i,e){if(e){if(e.length<=1)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC2");if(e.length>29)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC30")}else return new Error("\u9700\u8981\u6A19\u984C");return!0}},articleDescription:{required:!0,trigger:["blur","input"],validator(i,e){if(e){if(e.length<=9)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC10");if(e.length>149)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC150")}else return new Error("\u9700\u8981\u63CF\u8FF0");return!0}},articlePic:{required:!0,validator(i,e){var o,a,s;if(e){if(!e.length||((a=(o=e[0])==null?void 0:o.type)==null?void 0:a.includes("image"))&&((s=e[0])==null?void 0:s.size)<1024*1024)return new Error("\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26")}else return new Error("\u9700\u8981\u5716\u7247");return!0}},articleEditor:{required:!0},articleCategory:{required:!0},articleDate:{required:!0}},h=[{label:"\u9F52\u984E\u77EF\u6B63",key:"orthodontics",value:"\u9F52\u984E\u77EF\u6B63"},{label:"\u4EBA\u5DE5\u690D\u7259",key:"dental implant",value:"\u4EBA\u5DE5\u690D\u7259"},{label:"\u7F8E\u5BB9\u7259\u79D1",key:"aesthetic",value:"\u7F8E\u5BB9\u7259\u79D1"},{label:"\u5BB6\u5EAD\u7259\u79D1",key:"family dentistry division",value:"\u5BB6\u5EAD\u7259\u79D1"}],b=async()=>{t.show=!0;const i=new FormData;for(const e in t)["_id","idx","show"].includes(e)||(e==="articlePic"?i.append(e,t[e][0].file):i.append(e,t[e]));try{t._id.length===0&&(await F.post("/articles",i),_.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"}),f.push("/admin/admin-article-setting"))}catch(e){console.log(e),_.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.show=!1};return(i,e)=>{const o=I,a=Q,s=R,w=M,y=O,v=V,x=G,E=q,k=W,D=$,S=N;return B(),U("section",H,[J,n(S,{class:"articleForm",ref_key:"formRef",ref:m,model:t,rules:g,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:d.value,style:{maxWidth:"1000px"},onSubmit:A(b,["prevent"])},{default:r(()=>[n(k,{cols:24,"x-gap":24},{default:r(()=>[n(a,{span:24,label:"\u9078\u64C7\u5206\u985E",path:"articleCategory"},{default:r(()=>[n(o,{value:t.articleCategory,"onUpdate:value":e[0]||(e[0]=l=>t.articleCategory=l),options:h,placeholder:"\u9078\u64C7\u5206\u985E"},null,8,["value"])]),_:1}),n(a,{span:24,label:"\u6587\u7AE0\u6A19\u984C",path:"articleTitle"},{default:r(()=>[n(s,{value:t.articleTitle,"onUpdate:value":e[1]||(e[1]=l=>t.articleTitle=l),placeholder:"\u8ACB\u8F38\u5165\u6587\u7AE0\u6A19\u984C"},null,8,["value"])]),_:1}),n(a,{span:12,label:"\u6587\u7AE0\u65E5\u671F",path:"articleDate"},{default:r(()=>[n(w,{value:t.articleDate,"onUpdate:value":e[2]||(e[2]=l=>t.articleDate=l),type:"datetime",clearable:""},null,8,["value"])]),_:1}),n(a,{span:12,"rail-style":u,label:"\u662F\u5426\u4E0A\u67B6",path:"articleShow"},{default:r(()=>[n(y,{"rail-style":u,value:t.articleShow,"onUpdate:value":e[3]||(e[3]=l=>t.articleShow=l)},{checked:r(()=>[]),unchecked:r(()=>[]),_:1},8,["value"])]),_:1}),n(a,{span:24,label:"\u6587\u7AE0\u5716\u7247",path:"articlePic"},{default:r(()=>[n(x,{"file-list":t.articlePic,"onUpdate:file-list":e[4]||(e[4]=l=>t.articlePic=l),accept:"image/*"},{default:r(()=>[n(v,null,{default:r(()=>[K]),_:1})]),_:1},8,["file-list"])]),_:1}),n(a,{span:24,label:"\u6587\u7AE0\u63CF\u8FF0",path:"articleDescription"},{"clear-icon":r(()=>[n(E,{component:i.TrashBinOutline},null,8,["component"])]),default:r(()=>[n(s,{value:t.articleDescription,"onUpdate:value":e[5]||(e[5]=l=>t.articleDescription=l),placeholder:"Textarea",type:"textarea",round:"",clearable:"",autosize:{minRows:3}},null,8,["value"])]),_:1}),n(a,{span:24,label:"\u6587\u7AE0\u5167\u5BB9",path:"articleEditor"},{default:r(()=>[c("div",null,[n(P(j),{toolbar:"full",content:t.articleEditor,"onUpdate:content":e[6]||(e[6]=l=>t.articleEditor=l),contentType:"html"},null,8,["content"])])]),_:1})]),_:1}),c("div",L,[c("a",X,[n(D,{show:t.show},{default:r(()=>[Y]),_:1},8,["show"])])])]),_:1},8,["model","size","onSubmit"])])}}};export{ae as default};
