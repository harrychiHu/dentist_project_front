import{V as d,u as k,r as A,B,o as S,c as z,b as n,w as i,bh as F,a as u,bj as N,k as v,L as q,S as _,ar as R,bn as U,N as V,bi as T}from"./index.eb58e2d4.js";import{_ as $}from"./Upload.6836ed7a.js";import{_ as j}from"./Switch.dd1abc46.js";const D={id:"doctorEditor"},Z=u("h1",null,"\u91AB\u5E2B\u7BA1\u7406",-1),C=v("\u4E0A\u50B3\u91AB\u5E2B\u7167\u7247"),I={style:{display:"flex","justify-content":"flex-end"},class:"submitButton"},L={href:"#admin/admin-doctor-setting"},M=u("button",{type:"submit"},"\u4FDD\u5B58",-1),J={__name:"AdminDoctorEditorSetting",setup(O){const m=d("medium"),p=d(null),f=k(),t=A({_id:"",name:"",image:[],description:"",online:!1,idx:-1,show:!1}),c=({focused:o,checked:e})=>{const r={};return e?(r.background="#2473cb",o&&(r.boxShadow="0 0 0 2px #2169BA")):(r.background="#959595",o&&(r.boxShadow="0 0 0 2px #595959")),r},h={name:{required:!0,trigger:["blur","input"],validator(o,e){if(e)if(/^[\u4E00-\u9FA5A-Za-z\s]+(Â·[\u4E00-\u9FA5A-Za-z]+)*$/.test(e)){if(e.length<=1)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC2");if(e.length>=10)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC10")}else return new Error("\u540D\u5B57\u683C\u5F0F\u932F\u8AA4");else return new Error("\u9700\u8981\u540D\u5B57");return!0}},description:{required:!0,trigger:["blur","input"],validator(o,e){if(e){if(e.length<=9)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC10");if(e.length>=99)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC100")}else return new Error("\u9700\u8981\u63CF\u8FF0");return!0}},image:{required:!0,validator(o,e){var r,s,l;if(e){if(!e.length||((s=(r=e[0])==null?void 0:r.type)==null?void 0:s.includes("image"))&&((l=e[0])==null?void 0:l.size)<1024*1024)return new Error("\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26")}else return new Error("\u9700\u8981\u5716\u7247");return!0}}},g=async()=>{t.show=!0;const o=new FormData;for(const e in t)["_id","idx","show"].includes(e)||(e==="image"?o.append(e,t[e][0].file):o.append(e,t[e]));try{t._id.length===0&&(await q.post("/doctors",o),_.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"}),f.push("/admin/admin-doctor-setting"))}catch(e){console.log(e),_.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.show=!1};return(o,e)=>{const r=R,s=U,l=V,w=$,b=B,x=j,y=T,E=N;return S(),z("section",D,[Z,n(E,{class:"doctorForm",ref_key:"formRef",ref:p,model:t,rules:h,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:m.value,style:{maxWidth:"1000px"},onSubmit:F(g,["prevent"])},{default:i(()=>[n(s,{label:"\u91AB\u5E2B\u59D3\u540D",path:"name"},{default:i(()=>[n(r,{value:t.name,"onUpdate:value":e[0]||(e[0]=a=>t.name=a),placeholder:"\u8ACB\u8F38\u5165\u91AB\u5E2B\u59D3\u540D"},null,8,["value"])]),_:1}),n(s,{label:"\u91AB\u5E2B\u7167\u7247",path:"image"},{default:i(()=>[n(w,{"file-list":t.image,"onUpdate:file-list":e[1]||(e[1]=a=>t.image=a),accept:"image/*",max:1},{default:i(()=>[n(l,null,{default:i(()=>[C]),_:1})]),_:1},8,["file-list"])]),_:1}),n(s,{label:"\u91AB\u5E2B\u4ECB\u7D39",path:"description"},{"clear-icon":i(()=>[n(b,{component:o.TrashBinOutline},null,8,["component"])]),default:i(()=>[n(r,{value:t.description,"onUpdate:value":e[2]||(e[2]=a=>t.description=a),placeholder:"Textarea",type:"textarea",round:"",clearable:"",autosize:{minRows:3}},null,8,["value"])]),_:1}),n(s,{"rail-style":c,label:"\u662F\u5426\u4E0A\u67B6",path:"online"},{default:i(()=>[n(x,{"rail-style":c,checked:t.online,"onUpdate:checked":e[3]||(e[3]=a=>t.online=a)},{checked:i(()=>[]),unchecked:i(()=>[]),_:1},8,["checked"])]),_:1}),u("div",I,[u("a",L,[n(y,{show:t.show},{default:i(()=>[M]),_:1},8,["show"])])])]),_:1},8,["model","size","onSubmit"])])}}};export{J as default};
