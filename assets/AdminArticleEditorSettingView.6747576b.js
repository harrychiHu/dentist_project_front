import{V as _,u as q,r as U,B as A,o as N,c as z,b as n,w as o,bh as V,a as u,bj as F,C as R,k as T,L as C,S as d,ar as $,N as j,bi as D}from"./index.37166f55.js";import{Q,_ as I,a as L}from"./vue-quill.esm-bundler.85373944.js";import{_ as M}from"./Select.1b8c761a.js";import{_ as O}from"./DatePicker.5057ce73.js";import{_ as W}from"./Switch.e90bb999.js";import{_ as G}from"./Upload.c56e8777.js";import"./get-slot.65c4337d.js";const H={id:"ArticleEditor"},J=u("h1",null,"\u6587\u7AE0\u7BA1\u7406",-1),K=T("\u4E0A\u50B3\u6587\u7AE0\u5716\u7247"),P={style:{display:"flex","justify-content":"flex-end"},class:"submitButton"},X={href:"#admin/admin-article-setting"},Y=u("button",{type:"submit"},"\u4FDD\u5B58",-1),ie={__name:"AdminArticleEditorSettingView",setup(Z){const c=_("medium"),m=_(null),f=q(),t=U({_id:"",title:"",date:Date.now(),image:[],description:"",online:!1,idx:-1,show:!1,editor:"",category:""}),p=({focused:l,checked:e})=>{const a={};return e?(a.background="#2473cb",l&&(a.boxShadow="0 0 0 2px #2169BA")):(a.background="#959595",l&&(a.boxShadow="0 0 0 2px #595959")),a},g={title:{required:!0,trigger:["blur","input"],validator(l,e){if(e){if(e.length<=1)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC2");if(e.length>29)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC30")}else return new Error("\u9700\u8981\u6A19\u984C");return!0}},description:{required:!0,trigger:["blur","input"],validator(l,e){if(e){if(e.length<=9)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC10");if(e.length>149)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC150")}else return new Error("\u9700\u8981\u63CF\u8FF0");return!0}},img:{required:!0,validator(l,e){var a,i,s;if(e){if(!e.length||((i=(a=e[0])==null?void 0:a.type)==null?void 0:i.includes("image"))&&((s=e[0])==null?void 0:s.size)<1024*1024)return new Error("\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26")}else return new Error("\u9700\u8981\u5716\u7247");return!0}},editor:{required:!0},category:{required:!0},date:{required:!0}},h=[{label:"\u53E3\u8154\u4FDD\u5065",key:"oral hygiene",value:"\u53E3\u8154\u4FDD\u5065"},{label:"\u7259\u9F52\u77EF\u6B63",key:"orthodontics",value:"\u7259\u9F52\u77EF\u6B63"},{label:"\u7259\u9F52\u7F8E\u5BB9",key:"dental beauty",value:"\u7259\u9F52\u7F8E\u5BB9"},{label:"\u98DF\u8B5C\u4FDD\u5065",key:"recipe health",value:"\u98DF\u8B5C\u4FDD\u5065"}],b=async()=>{t.show=!0;const l=new FormData;for(const e in t)["_id","idx","show"].includes(e)||(e==="image"?l.append(e,t[e][0].file):l.append(e,t[e]));try{t._id.length===0&&(await C.post("/articles",l),d.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"}),f.push("/admin/admin-article-setting"))}catch(e){console.log(e),d.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.show=!1};return(l,e)=>{const a=M,i=I,s=$,w=O,y=W,v=j,x=G,k=A,E=L,B=D,S=F;return N(),z("section",H,[J,n(S,{class:"articleForm",ref_key:"formRef",ref:m,model:t,rules:g,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:c.value,style:{maxWidth:"1000px"},onSubmit:V(b,["prevent"])},{default:o(()=>[n(E,{cols:24,"x-gap":24},{default:o(()=>[n(i,{span:24,label:"\u9078\u64C7\u5206\u985E",path:"category"},{default:o(()=>[n(a,{value:t.category,"onUpdate:value":e[0]||(e[0]=r=>t.category=r),options:h,placeholder:"\u9078\u64C7\u5206\u985E"},null,8,["value"])]),_:1}),n(i,{span:24,label:"\u6587\u7AE0\u6A19\u984C",path:"title"},{default:o(()=>[n(s,{value:t.title,"onUpdate:value":e[1]||(e[1]=r=>t.title=r),placeholder:"\u8ACB\u8F38\u5165\u6587\u7AE0\u6A19\u984C"},null,8,["value"])]),_:1}),n(i,{span:12,label:"\u6587\u7AE0\u65E5\u671F",path:"date"},{default:o(()=>[n(w,{value:t.date,"onUpdate:value":e[2]||(e[2]=r=>t.date=r),type:"datetime",clearable:""},null,8,["value"])]),_:1}),n(i,{span:12,"rail-style":p,label:"\u662F\u5426\u4E0A\u67B6",path:"online"},{default:o(()=>[n(y,{"rail-style":p,value:t.online,"onUpdate:value":e[3]||(e[3]=r=>t.online=r)},{checked:o(()=>[]),unchecked:o(()=>[]),_:1},8,["value"])]),_:1}),n(i,{span:24,label:"\u6587\u7AE0\u5716\u7247",path:"image",max:1},{default:o(()=>[n(x,{"file-list":t.image,"onUpdate:file-list":e[4]||(e[4]=r=>t.image=r),accept:"image/*"},{default:o(()=>[n(v,null,{default:o(()=>[K]),_:1})]),_:1},8,["file-list"])]),_:1}),n(i,{span:24,label:"\u6587\u7AE0\u63CF\u8FF0",path:"description"},{"clear-icon":o(()=>[n(k,{component:l.TrashBinOutline},null,8,["component"])]),default:o(()=>[n(s,{value:t.description,"onUpdate:value":e[5]||(e[5]=r=>t.description=r),placeholder:"Textarea",type:"textarea",round:"",clearable:"",autosize:{minRows:3}},null,8,["value"])]),_:1}),n(i,{span:24,label:"\u6587\u7AE0\u5167\u5BB9",path:"editor"},{default:o(()=>[u("div",null,[n(R(Q),{toolbar:"full",content:t.editor,"onUpdate:content":e[6]||(e[6]=r=>t.editor=r),contentType:"html"},null,8,["content"])])]),_:1})]),_:1}),u("div",P,[u("a",X,[n(B,{show:t.show},{default:o(()=>[Y]),_:1},8,["show"])])])]),_:1},8,["model","size","onSubmit"])])}}};export{ie as default};
