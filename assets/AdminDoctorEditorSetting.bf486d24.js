import{C as u,u as N,r as k,ac as S,o as z,c as A,b as o,w as r,bt as D,a as l,bw as v,L as _,aq as B,S as d,aE as F,bu as P,N as q,bv as R}from"./index.ec167b05.js";import{_ as U}from"./Upload.7a5c94ca.js";import{_ as T}from"./Checkbox.437378c3.js";import"./Image.6a3be9b4.js";const V={id:"doctorEditor"},$=l("h1",null,"\u91AB\u5E2B\u7BA1\u7406",-1),C=_("\u4E0A\u50B3\u91AB\u5E2B\u7167\u7247"),Z=_(" \u4E0A\u7DDA "),j={style:{display:"flex","justify-content":"flex-end"},class:"submitButton"},I={href:"#admin/admin-doctor-setting"},L=l("button",{type:"submit"},"\u4FDD\u5B58",-1),J={__name:"AdminDoctorEditorSetting",setup(M){const p=u("medium"),m=u(null),f=N(),t=k({_id:"",doctorName:"",doctorPic:[],doctorDescription:"",doctorShow:!1,idx:-1,show:!1}),h={doctorName:{required:!0,trigger:["blur","input"],validator(n,e){if(e)if(/^[\u4E00-\u9FA5A-Za-z\s]+(Â·[\u4E00-\u9FA5A-Za-z]+)*$/.test(e)){if(e.length<=1)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC2");if(e.length>=10)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC10")}else return new Error("\u540D\u5B57\u683C\u5F0F\u932F\u8AA4");else return new Error("\u9700\u8981\u540D\u5B57");return!0}},doctorDescription:{required:!0,trigger:["blur","input"],validator(n,e){if(e){if(e.length<=9)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC10");if(e.length>=99)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC100")}else return new Error("\u9700\u8981\u63CF\u8FF0");return!0}},doctorPic:{required:!0,validator(n,e){var a,s,c;if(e){if(!e.length||((s=(a=e[0])==null?void 0:a.type)==null?void 0:s.includes("image"))&&((c=e[0])==null?void 0:c.size)<1024*1024)return new Error("\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26")}else return new Error("\u9700\u8981\u5716\u7247");return!0}}},w=async()=>{t.show=!0;const n=new FormData;for(const e in t)["_id","idx","show"].includes(e)||(e==="doctorPic"?n.append(e,t[e][0].file):n.append(e,t[e]));try{t._id.length===0&&(await B.post("/doctors",n),d.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"}),f.push("/admin/admin-doctor-setting"))}catch(e){console.log(e),d.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.show=!1};return(n,e)=>{const a=F,s=P,c=q,g=U,b=S,E=T,x=R,y=v;return z(),A("section",V,[$,o(y,{class:"doctorForm",ref_key:"formRef",ref:m,model:t,rules:h,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:p.value,style:{maxWidth:"1000px"},onSubmit:D(w,["prevent"])},{default:r(()=>[o(s,{label:"\u91AB\u5E2B\u59D3\u540D",path:"doctorName"},{default:r(()=>[o(a,{value:t.doctorName,"onUpdate:value":e[0]||(e[0]=i=>t.doctorName=i),placeholder:"\u8ACB\u8F38\u5165\u91AB\u5E2B\u59D3\u540D"},null,8,["value"])]),_:1}),o(s,{label:"\u91AB\u5E2B\u7167\u7247",path:"doctorPic"},{default:r(()=>[o(g,{"file-list":t.doctorPic,"onUpdate:file-list":e[1]||(e[1]=i=>t.doctorPic=i),accept:"image/*"},{default:r(()=>[o(c,null,{default:r(()=>[C]),_:1})]),_:1},8,["file-list"])]),_:1}),o(s,{label:"\u91AB\u5E2B\u4ECB\u7D39",path:"doctorDescription"},{"clear-icon":r(()=>[o(b,{component:n.TrashBinOutline},null,8,["component"])]),default:r(()=>[o(a,{value:t.doctorDescription,"onUpdate:value":e[2]||(e[2]=i=>t.doctorDescription=i),placeholder:"Textarea",type:"textarea",round:"",clearable:"",autosize:{minRows:3}},null,8,["value"])]),_:1}),o(s,{label:"\u662F\u5426\u4E0A\u7DDA",path:"doctorShow"},{default:r(()=>[o(E,{checked:t.doctorShow,"onUpdate:checked":e[3]||(e[3]=i=>t.doctorShow=i)},{default:r(()=>[Z]),_:1},8,["checked"])]),_:1}),l("div",j,[l("a",I,[o(x,{show:t.show},{default:r(()=>[L]),_:1},8,["show"])])])]),_:1},8,["model","size","onSubmit"])])}}};export{J as default};
