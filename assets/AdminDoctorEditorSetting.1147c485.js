import{V as d,u as k,r as S,C as N,o as A,c as z,b as o,w as s,bh as B,a as l,bj as D,k as F,n as P,S as _,ar as v,bn as q,N as R,bi as U}from"./index.1be40601.js";import{_ as V}from"./Upload.bf02a748.js";import{_ as T}from"./Switch.753facd8.js";const $={id:"doctorEditor"},j=l("h1",null,"\u91AB\u5E2B\u7BA1\u7406",-1),C=F("\u4E0A\u50B3\u91AB\u5E2B\u7167\u7247"),Z={style:{display:"flex","justify-content":"flex-end"},class:"submitButton"},I={href:"#admin/admin-doctor-setting"},M=l("button",{type:"submit"},"\u4FDD\u5B58",-1),J={__name:"AdminDoctorEditorSetting",setup(O){const p=d("medium"),m=d(null),f=k(),t=S({_id:"",doctorName:"",doctorPic:[],doctorDescription:"",doctorShow:!1,idx:-1,show:!1}),u=({focused:r,checked:e})=>{const n={};return e?(n.background="#2473cb",r&&(n.boxShadow="0 0 0 2px #2169BA")):(n.background="#959595",r&&(n.boxShadow="0 0 0 2px #595959")),n},h={doctorName:{required:!0,trigger:["blur","input"],validator(r,e){if(e)if(/^[\u4E00-\u9FA5A-Za-z\s]+(Â·[\u4E00-\u9FA5A-Za-z]+)*$/.test(e)){if(e.length<=1)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC2");if(e.length>=10)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC10")}else return new Error("\u540D\u5B57\u683C\u5F0F\u932F\u8AA4");else return new Error("\u9700\u8981\u540D\u5B57");return!0}},doctorDescription:{required:!0,trigger:["blur","input"],validator(r,e){if(e){if(e.length<=9)return new Error("\u5B57\u6578\u4E0D\u80FD\u5C11\u65BC10");if(e.length>=99)return new Error("\u5B57\u6578\u4E0D\u80FD\u591A\u65BC100")}else return new Error("\u9700\u8981\u63CF\u8FF0");return!0}},doctorPic:{required:!0,validator(r,e){var n,i,a;if(e){if(!e.length||((i=(n=e[0])==null?void 0:n.type)==null?void 0:i.includes("image"))&&((a=e[0])==null?void 0:a.size)<1024*1024)return new Error("\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26")}else return new Error("\u9700\u8981\u5716\u7247");return!0}}},w=async()=>{t.show=!0;const r=new FormData;for(const e in t)["_id","idx","show"].includes(e)||(e==="doctorPic"?r.append(e,t[e][0].file):r.append(e,t[e]));try{t._id.length===0&&(await P.post("/doctors",r),_.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"}),f.push("/admin/admin-doctor-setting"))}catch(e){console.log(e),_.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}t.show=!1};return(r,e)=>{const n=v,i=q,a=R,g=V,b=N,x=T,y=U,E=D;return A(),z("section",$,[j,o(E,{class:"doctorForm",ref_key:"formRef",ref:m,model:t,rules:h,"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:p.value,style:{maxWidth:"1000px"},onSubmit:B(w,["prevent"])},{default:s(()=>[o(i,{label:"\u91AB\u5E2B\u59D3\u540D",path:"doctorName"},{default:s(()=>[o(n,{value:t.doctorName,"onUpdate:value":e[0]||(e[0]=c=>t.doctorName=c),placeholder:"\u8ACB\u8F38\u5165\u91AB\u5E2B\u59D3\u540D"},null,8,["value"])]),_:1}),o(i,{label:"\u91AB\u5E2B\u7167\u7247",path:"doctorPic"},{default:s(()=>[o(g,{"file-list":t.doctorPic,"onUpdate:file-list":e[1]||(e[1]=c=>t.doctorPic=c),accept:"image/*"},{default:s(()=>[o(a,null,{default:s(()=>[C]),_:1})]),_:1},8,["file-list"])]),_:1}),o(i,{label:"\u91AB\u5E2B\u4ECB\u7D39",path:"doctorDescription"},{"clear-icon":s(()=>[o(b,{component:r.TrashBinOutline},null,8,["component"])]),default:s(()=>[o(n,{value:t.doctorDescription,"onUpdate:value":e[2]||(e[2]=c=>t.doctorDescription=c),placeholder:"Textarea",type:"textarea",round:"",clearable:"",autosize:{minRows:3}},null,8,["value"])]),_:1}),o(i,{"rail-style":u,label:"\u662F\u5426\u4E0A\u67B6",path:"doctorShow"},{default:s(()=>[o(x,{"rail-style":u,checked:t.doctorShow,"onUpdate:checked":e[3]||(e[3]=c=>t.doctorShow=c)},{checked:s(()=>[]),unchecked:s(()=>[]),_:1},8,["checked"])]),_:1}),l("div",Z,[l("a",I,[o(y,{show:t.show},{default:s(()=>[M]),_:1},8,["show"])])])]),_:1},8,["model","size","onSubmit"])])}}};export{J as default};
